Object subclass: #CuOOra	instanceVariableNames: 'users topics questions'	classVariableNames: ''	package: 'TP-Refactoring-Model'!!CuOOra methodsFor: 'adding'!addQuestion: aQuestion forUser: aUser	aUser addQuestion: aQuestion.	questions add: aQuestion.! !!CuOOra methodsFor: 'adding'!addQuestion: aQuestion	questions add: aQuestion! !!CuOOra methodsFor: 'adding'!addUser: aUser	users add: aUser ! !!CuOOra methodsFor: 'adding'!addTopic: aTopic	topics add: aTopic ! !!CuOOra methodsFor: 'retrieving' stamp: 'sufficientname 5/19/2021 01:55'!averageVotes: aNumber	^ (questions sum: [ :q | q positiveVotesCount ]) / aNumber! !!CuOOra methodsFor: 'retrieving' stamp: 'sufficientname 5/18/2021 23:31'!getTodayQuestions	^ self questions select: [ :q | q timestamp asDate = Date today ]! !!CuOOra methodsFor: 'retrieving' stamp: 'sufficientname 5/19/2021 00:37'!getPopularTodayQuestions	^ self getTodayQuestions		select: [ :q | 			q positiveVotesCount				>= (self averageVotes: self getTodayQuestions size) ]! !!CuOOra methodsFor: 'initialize'!initialize	users := OrderedCollection new.	topics := OrderedCollection new.	questions := OrderedCollection new! !!CuOOra methodsFor: 'accessing'!users	^ users! !!CuOOra methodsFor: 'accessing'!questions	^ questions! !!CuOOra methodsFor: 'accessing'!topics	^ topics! !Object subclass: #Publication	instanceVariableNames: 'timestamp user votes description'	classVariableNames: ''	package: 'TP-Refactoring-Model'!!Publication methodsFor: 'accessing'!description	^ description! !!Publication methodsFor: 'accessing'!timestamp	^ timestamp! !!Publication methodsFor: 'accessing'!votes	^ votes! !!Publication methodsFor: 'accessing'!user	^ user! !!Publication methodsFor: 'initialize'!initialize	votes := OrderedCollection new.	timestamp := DateAndTime now! !!Publication methodsFor: 'retrieving' stamp: 'sufficientname 5/19/2021 00:33'!positiveVotesCount	^ self positiveVotes size! !!Publication methodsFor: 'retrieving'!negativeVotes	^ votes reject: [ :vote | vote isLike ]! !!Publication methodsFor: 'retrieving'!positiveVotes	^ votes select: [ :vote | vote isLike ]! !!Publication methodsFor: 'private'!user: anObject	user := anObject! !!Publication methodsFor: 'private'!description: anObject	description := anObject! !!Publication methodsFor: 'private'!timestamp: anObject	timestamp := anObject! !!Publication methodsFor: 'adding'!addVote: aVote	votes add: aVote! !Publication subclass: #Answer	instanceVariableNames: 'question'	classVariableNames: ''	package: 'TP-Refactoring-Model'!!Answer methodsFor: 'private'!question: aQuestion	question := aQuestion ! !"-- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- "!Answer class	instanceVariableNames: ''!!Answer class methodsFor: 'instance creation'!new: anAnswer user: aUser question: aQuestion	^ self new		description: anAnswer;		user: aUser;		question: aQuestion;		yourself! !Publication subclass: #Question	instanceVariableNames: 'title answers topics'	classVariableNames: ''	package: 'TP-Refactoring-Model'!!Question methodsFor: 'adding'!addTopic: aTopic	topics add: aTopic.	aTopic addQuestion: self.! !!Question methodsFor: 'initialization'!initialize	super initialize.	answers := OrderedCollection new.	topics := OrderedCollection new! !!Question methodsFor: 'accessing'!topics	^topics ! !!Question methodsFor: 'accessing'!title	^title ! !!Question methodsFor: 'accessing'!title: aTitle	title := aTitle ! !"-- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- "!Question class	instanceVariableNames: ''!!Question class methodsFor: 'instance creation'!newWithTitle: aTitle description: aDescription user: aUser topic: aTopic	^ self new		title: aTitle;		description: aDescription;		addTopic: aTopic;		user: aUser;		yourself.! !!Question class methodsFor: 'instance creation'!newWithTitle: aTitle description: aDescription user: aUser	^ self new		title: aTitle;		description: aDescription;		user: aUser;		yourself.! !Object subclass: #QuestionRetriever	instanceVariableNames: 'cuoora'	classVariableNames: ''	package: 'TP-Refactoring-Model'!!QuestionRetriever methodsFor: 'retrieving' stamp: 'sufficientname 5/19/2021 01:19'!limitQuestions: aQuestionCollection	^ aQuestionCollection		last: (self questionsLimit min: aQuestionCollection size)! !!QuestionRetriever methodsFor: 'retrieving' stamp: 'sufficientname 5/19/2021 01:12'!sortQuestions: aQuestionCollection	^ aQuestionCollection asSortedCollection: [ :a :b | a positiveVotesCount > b positiveVotesCount ]! !!QuestionRetriever methodsFor: 'retrieving' stamp: 'sufficientname 5/19/2021 01:29'!retrieveQuestions: aUser	^ (self		limitQuestions: (self sortQuestions: (self getQuestionsFor: aUser)))		reject: [ :q | q user = aUser ]! !!QuestionRetriever methodsFor: 'accesing'!cuoora: aCuooraInstance	cuoora := aCuooraInstance ! !!QuestionRetriever methodsFor: 'private'!questionsLimit	^ 100! !!QuestionRetriever methodsFor: 'private'!getQuestionsFor: aUser	self subclassResponsibility ! !"-- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- "!QuestionRetriever class	instanceVariableNames: ''!!QuestionRetriever class methodsFor: 'instance creation'!newForCuOOra: cuoora	^ self new cuoora: cuoora; yourself ! !QuestionRetriever subclass: #NewsQuestionRetriever	instanceVariableNames: ''	classVariableNames: ''	package: 'TP-Refactoring-Model'!!NewsQuestionRetriever methodsFor: 'retrieving' stamp: 'sufficientname 5/18/2021 23:42'!getQuestionsFor: aUser	^ cuoora getTodayQuestions! !QuestionRetriever subclass: #PopularTodayQuestionRetriever	instanceVariableNames: ''	classVariableNames: ''	package: 'TP-Refactoring-Model'!!PopularTodayQuestionRetriever methodsFor: 'retrieving' stamp: 'sufficientname 5/19/2021 00:38'!getQuestionsFor: aUser	^ cuoora getPopularTodayQuestions! !QuestionRetriever subclass: #SocialQuestionRetriever	instanceVariableNames: ''	classVariableNames: ''	package: 'TP-Refactoring-Model'!!SocialQuestionRetriever methodsFor: 'retrieving' stamp: 'sufficientname 5/19/2021 00:41'!getQuestionsFor: aUser	^ aUser getFollowingUsersQuestions! !Object subclass: #Topic	instanceVariableNames: 'name description questions'	classVariableNames: ''	package: 'TP-Refactoring-Model'!!Topic methodsFor: 'accessing'!description	^ description! !!Topic methodsFor: 'accessing'!name	^name! !!Topic methodsFor: 'accessing'!name: anObject	name := anObject! !!Topic methodsFor: 'accessing'!description: anObject	description := anObject! !!Topic methodsFor: 'accessing'!questions	^ questions! !!Topic methodsFor: 'adding'!addQuestion: aQuetion	questions add: aQuetion ! !!Topic methodsFor: 'initialize'!initialize	questions := OrderedCollection new.! !"-- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- "!Topic class	instanceVariableNames: ''!!Topic class methodsFor: 'intance creation'!name: aName description: aDescription	^ self new		name: aName;		description: aDescription;		yourself! !QuestionRetriever subclass: #TopicsQuestionRetriever	instanceVariableNames: ''	classVariableNames: ''	package: 'TP-Refactoring-Model'!!TopicsQuestionRetriever methodsFor: 'retrieving' stamp: 'sufficientname 5/19/2021 00:46'!getQuestionsFor: aUser	^ aUser getFollowingTopicsQuestions! !Object subclass: #User	instanceVariableNames: 'questionRetriever questions answers username password topics following votes'	classVariableNames: ''	package: 'TP-Refactoring-Model'!!User methodsFor: 'adding'!follow: aUser	following add: aUser ! !!User methodsFor: 'adding'!addQuestion: aQuestion	questions add: aQuestion! !!User methodsFor: 'adding'!addAnswer: anAnswer	answers add: anAnswer ! !!User methodsFor: 'adding'!addTopic: aTopic	topics add: aTopic ! !!User methodsFor: 'adding'!addVote: aVote	votes add: aVote! !!User methodsFor: 'initialize'!initialize	questions := OrderedCollection new.	answers := OrderedCollection new.	topics := OrderedCollection new.	following := OrderedCollection new.	votes := OrderedCollection new! !!User methodsFor: 'private'!questionRetriever: aQuestionRetriever	questionRetriever := aQuestionRetriever.! !!User methodsFor: 'private'!password: anObject	password := anObject! !!User methodsFor: 'private'!username: anObject	username := anObject! !!User methodsFor: 'retrieving' stamp: 'sufficientname 5/19/2021 00:42'!questionsOfInterest	^ questionRetriever retrieveQuestions: self.! !!User methodsFor: 'retrieving' stamp: 'sufficientname 5/19/2021 00:46'!getFollowingTopicsQuestions	^ topics flatCollect: [ :topic | topic questions ]! !!User methodsFor: 'retrieving' stamp: 'sufficientname 5/19/2021 00:42'!getFollowingUsersQuestions	^ following flatCollect: [ :follow | follow questions ]! !!User methodsFor: 'accessing'!username	^ username! !!User methodsFor: 'accessing'!questionRetriever	^ questionRetriever! !!User methodsFor: 'accessing'!topics	^ topics! !!User methodsFor: 'accessing'!password	^ password! !!User methodsFor: 'accessing'!following	^ following! !!User methodsFor: 'accessing'!votes	^ votes! !!User methodsFor: 'accessing'!questions	^ questions! !!User methodsFor: 'accessing'!answers	^ answers! !"-- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- "!User class	instanceVariableNames: ''!!User class methodsFor: 'instance-creation'!username: aUsername password: aPassword questionRetriever: aQuestionRetriever	^ self new		username: aUsername;		password: aPassword;		questionRetriever: aQuestionRetriever;		yourself! !Object subclass: #Vote	instanceVariableNames: 'isLike timstamp publication user'	classVariableNames: ''	package: 'TP-Refactoring-Model'!!Vote methodsFor: 'private'!like	isLike := true.! !!Vote methodsFor: 'private'!user: anObject	user := anObject! !!Vote methodsFor: 'private'!publication: anObject	publication := anObject! !!Vote methodsFor: 'private'!dislike	isLike := false.! !!Vote methodsFor: 'initialize'!initialize	isLike := true.	timstamp := DateAndTime now.	! !!Vote methodsFor: 'accessing'!user	^ user! !!Vote methodsFor: 'accessing'!isLike	^ isLike! !!Vote methodsFor: 'accessing'!publication	^ publication! !"-- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- "!Vote class	instanceVariableNames: ''!!Vote class methodsFor: 'instance creation'!user: aUser dislikesPublication: aPublication	^ self new		user: aUser;		publication: aPublication;		dislike;		yourself! !!Vote class methodsFor: 'instance creation'!user: aUser likesPublication: aPublication	^ self new		user: aUser;		publication: aPublication;		yourself! !
Object subclass: #CuOOra	instanceVariableNames: 'users topics questions'	classVariableNames: ''	package: 'TP-Refactoring-Model'!!CuOOra methodsFor: 'initialize'!initialize	users := OrderedCollection new.	topics := OrderedCollection new.	questions := OrderedCollection new! !!CuOOra methodsFor: 'accessing'!users	^ users! !!CuOOra methodsFor: 'accessing'!questions	^ questions! !!CuOOra methodsFor: 'accessing'!topics	^ topics! !!CuOOra methodsFor: 'retrieving' stamp: 'sufficientname 5/6/2021 00:46'!averageVotes: aNumber	^ (questions sum: [ :q | q positiveVotes size ]) / aNumber! !!CuOOra methodsFor: 'adding'!addUser: aUser	users add: aUser ! !!CuOOra methodsFor: 'adding'!addQuestion: aQuestion forUser: aUser	aUser addQuestion: aQuestion.	questions add: aQuestion.! !!CuOOra methodsFor: 'adding'!addQuestion: aQuestion	questions add: aQuestion! !!CuOOra methodsFor: 'adding'!addTopic: aTopic	topics add: aTopic ! !Object subclass: #Publication	instanceVariableNames: 'timestamp user votes description'	classVariableNames: ''	package: 'TP-Refactoring-Model'!!Publication methodsFor: 'initialize' stamp: 'sufficientname 5/5/2021 21:43'!initialize	votes := OrderedCollection new.	timestamp := DateAndTime now! !!Publication methodsFor: 'accessing' stamp: 'sufficientname 5/5/2021 21:09'!description	^ description! !!Publication methodsFor: 'accessing' stamp: 'sufficientname 5/5/2021 21:09'!timestamp	^ timestamp! !!Publication methodsFor: 'accessing' stamp: 'sufficientname 5/5/2021 21:09'!user	^ user! !!Publication methodsFor: 'accessing' stamp: 'sufficientname 5/5/2021 21:09'!votes	^ votes! !!Publication methodsFor: 'adding' stamp: 'sufficientname 5/5/2021 21:09'!addVote: aVote	votes add: aVote! !!Publication methodsFor: 'private' stamp: 'sufficientname 5/5/2021 21:09'!user: anObject	user := anObject! !!Publication methodsFor: 'private' stamp: 'sufficientname 5/5/2021 21:09'!description: anObject	description := anObject! !!Publication methodsFor: 'private' stamp: 'sufficientname 5/5/2021 21:09'!timestamp: anObject	timestamp := anObject! !!Publication methodsFor: 'retrieving' stamp: 'sufficientname 5/5/2021 21:34'!negativeVotes	^ votes reject: [ :vote | vote isLike ]! !!Publication methodsFor: 'retrieving' stamp: 'sufficientname 5/5/2021 21:34'!positiveVotes	^ votes select: [ :vote | vote isLike ]! !Publication subclass: #Answer	instanceVariableNames: 'question'	classVariableNames: ''	package: 'TP-Refactoring-Model'!!Answer methodsFor: 'private'!question: aQuestion	question := aQuestion ! !"-- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- "!Answer class	instanceVariableNames: ''!!Answer class methodsFor: 'instance creation'!new: anAnswer user: aUser question: aQuestion	^ self new		description: anAnswer;		user: aUser;		question: aQuestion;		yourself! !Publication subclass: #Question	instanceVariableNames: 'title answers topics'	classVariableNames: ''	package: 'TP-Refactoring-Model'!!Question methodsFor: 'adding'!addTopic: aTopic	topics add: aTopic.	aTopic addQuestion: self.! !!Question methodsFor: 'initialization' stamp: 'sufficientname 5/5/2021 21:43'!initialize	super initialize.	answers := OrderedCollection new.	topics := OrderedCollection new! !!Question methodsFor: 'accessing'!title	^title ! !!Question methodsFor: 'accessing'!title: aTitle	title := aTitle ! !!Question methodsFor: 'accessing'!topics	^topics ! !"-- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- "!Question class	instanceVariableNames: ''!!Question class methodsFor: 'instance creation' stamp: 'sufficientname 5/6/2021 21:52'!newWithTitle: aTitle description: aDescription user: aUser	^ self new		title: aTitle;		description: aDescription;		user: aUser;		yourself.! !!Question class methodsFor: 'instance creation' stamp: 'sufficientname 5/6/2021 21:52'!newWithTitle: aTitle description: aDescription user: aUser topic: aTopic	^ self new		title: aTitle;		description: aDescription;		addTopic: aTopic;		user: aUser;		yourself.! !Object subclass: #QuestionRetriever	instanceVariableNames: 'cuoora'	classVariableNames: ''	package: 'TP-Refactoring-Model'!!QuestionRetriever methodsFor: 'accesing'!cuoora: aCuooraInstance	cuoora := aCuooraInstance ! !!QuestionRetriever methodsFor: 'retrieving' stamp: 'sufficientname 5/6/2021 20:32'!retrieveQuestions: aUser	^ self		limitAndSort: (self getQuestionsFor: aUser)		withoutQuestionsFrom: aUser! !!QuestionRetriever methodsFor: 'private' stamp: 'sufficientname 5/6/2021 20:29'!questionsLimitFor: aQuestionCollection	^ self questionsLimit min: aQuestionCollection size! !!QuestionRetriever methodsFor: 'private' stamp: 'sufficientname 5/6/2021 00:06'!getQuestionsFor: aUser	self subclassResponsibility ! !!QuestionRetriever methodsFor: 'private' stamp: 'sufficientname 5/6/2021 20:29'!limitAndSort: aQuestionCollection withoutQuestionsFrom: aUser	^ ((aQuestionCollection		asSortedCollection: [ :a :b | a positiveVotes size > b positiveVotes size ])		last: (self questionsLimitFor: aQuestionCollection))		reject: [ :q | q user = aUser ]! !!QuestionRetriever methodsFor: 'private' stamp: 'sufficientname 5/6/2021 20:21'!questionsLimit	^ 100! !"-- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- "!QuestionRetriever class	instanceVariableNames: ''!!QuestionRetriever class methodsFor: 'instance creation' stamp: 'sufficientname 5/6/2021 19:42'!newForCuOOra: cuoora	^ self new cuoora: cuoora; yourself ! !QuestionRetriever subclass: #NewsQuestionRetriever	instanceVariableNames: ''	classVariableNames: ''	package: 'TP-Refactoring-Model'!!NewsQuestionRetriever methodsFor: 'retrieving' stamp: 'sufficientname 5/6/2021 00:29'!getQuestionsFor: aUser	^ cuoora questions select: [ :q | q timestamp asDate = Date today ]! !QuestionRetriever subclass: #PopularTodayQuestionRetriever	instanceVariableNames: ''	classVariableNames: ''	package: 'TP-Refactoring-Model'!!PopularTodayQuestionRetriever methodsFor: 'retrieving' stamp: 'sufficientname 5/6/2021 20:13'!getQuestionsFor: aUser	| popularTCol |	popularTCol := cuoora questions		select: [ :q | q timestamp asDate = Date today ].	^ popularTCol		select: [ :q | q positiveVotes size >= (cuoora averageVotes: popularTCol size) ]! !QuestionRetriever subclass: #SocialQuestionRetriever	instanceVariableNames: ''	classVariableNames: ''	package: 'TP-Refactoring-Model'!!SocialQuestionRetriever methodsFor: 'retrieving' stamp: 'sufficientname 5/6/2021 01:08'!getQuestionsFor: aUser	^ aUser following flatCollect: [ :follow | follow questions ]! !Object subclass: #Topic	instanceVariableNames: 'name description questions'	classVariableNames: ''	package: 'TP-Refactoring-Model'!!Topic methodsFor: 'initialize'!initialize	questions := OrderedCollection new.! !!Topic methodsFor: 'adding'!addQuestion: aQuetion	questions add: aQuetion ! !!Topic methodsFor: 'accessing'!description	^ description! !!Topic methodsFor: 'accessing'!name	^name! !!Topic methodsFor: 'accessing'!questions	^ questions! !!Topic methodsFor: 'accessing'!description: anObject	description := anObject! !!Topic methodsFor: 'accessing'!name: anObject	name := anObject! !"-- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- "!Topic class	instanceVariableNames: ''!!Topic class methodsFor: 'intance creation'!name: aName description: aDescription	^ self new		name: aName;		description: aDescription;		yourself! !QuestionRetriever subclass: #TopicsQuestionRetriever	instanceVariableNames: ''	classVariableNames: ''	package: 'TP-Refactoring-Model'!!TopicsQuestionRetriever methodsFor: 'retrieving' stamp: 'sufficientname 5/6/2021 01:10'!getQuestionsFor: aUser	^ aUser topics flatCollect: [ :topic | topic questions ]! !Object subclass: #User	instanceVariableNames: 'questionRetriever questions answers username password topics following votes'	classVariableNames: ''	package: 'TP-Refactoring-Model'!!User methodsFor: 'accessing'!questions	^ questions! !!User methodsFor: 'accessing'!questionRetriever	^ questionRetriever! !!User methodsFor: 'accessing'!topics	^ topics! !!User methodsFor: 'accessing'!username	^ username! !!User methodsFor: 'accessing'!answers	^ answers! !!User methodsFor: 'accessing'!following	^ following! !!User methodsFor: 'accessing'!votes	^ votes! !!User methodsFor: 'accessing'!password	^ password! !!User methodsFor: 'retrieving'!questionsOfInterest	^ questionRetriever retrieveQuestions: self.! !!User methodsFor: 'initialize' stamp: 'sufficientname 5/5/2021 21:40'!initialize	questions := OrderedCollection new.	answers := OrderedCollection new.	topics := OrderedCollection new.	following := OrderedCollection new.	votes := OrderedCollection new! !!User methodsFor: 'adding'!addTopic: aTopic	topics add: aTopic ! !!User methodsFor: 'adding'!addQuestion: aQuestion	questions add: aQuestion! !!User methodsFor: 'adding'!addAnswer: anAnswer	answers add: anAnswer ! !!User methodsFor: 'adding'!addVote: aVote	votes add: aVote! !!User methodsFor: 'adding'!follow: aUser	following add: aUser ! !!User methodsFor: 'private'!password: anObject	password := anObject! !!User methodsFor: 'private'!questionRetriever: aQuestionRetriever	questionRetriever := aQuestionRetriever.! !!User methodsFor: 'private'!username: anObject	username := anObject! !"-- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- "!User class	instanceVariableNames: ''!!User class methodsFor: 'instance-creation'!username: aUsername password: aPassword questionRetriever: aQuestionRetriever	^ self new		username: aUsername;		password: aPassword;		questionRetriever: aQuestionRetriever;		yourself! !Object subclass: #Vote	instanceVariableNames: 'isLike timstamp publication user'	classVariableNames: ''	package: 'TP-Refactoring-Model'!!Vote methodsFor: 'private'!user: anObject	user := anObject! !!Vote methodsFor: 'private'!dislike	isLike := false.! !!Vote methodsFor: 'private'!publication: anObject	publication := anObject! !!Vote methodsFor: 'private'!like	isLike := true.! !!Vote methodsFor: 'accessing'!isLike	^ isLike! !!Vote methodsFor: 'accessing'!publication	^ publication! !!Vote methodsFor: 'accessing'!user	^ user! !!Vote methodsFor: 'initialize'!initialize	isLike := true.	timstamp := DateAndTime now.	! !"-- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- "!Vote class	instanceVariableNames: ''!!Vote class methodsFor: 'instance creation'!user: aUser dislikesPublication: aPublication	^ self new		user: aUser;		publication: aPublication;		dislike;		yourself! !!Vote class methodsFor: 'instance creation'!user: aUser likesPublication: aPublication	^ self new		user: aUser;		publication: aPublication;		yourself! !